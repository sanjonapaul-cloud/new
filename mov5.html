<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Starlight Cinemas Booking (INR)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #2A3047; /* Sophisticated Dark Blue-Gray Background */
        }
        /* Custom Colors for Theme */
        .primary-bg { background-color: #6D28D9; } /* Violet 700 */
        .primary-hover-bg { background-color: #5B21B6; } /* Violet 800 */
        .primary-text { color: #6D28D9; }
        .accent-bg { background-color: #F59E0B; } /* Amber 600 (Gold/Success) */
        .accent-hover-bg { background-color: #D97706; } /* Amber 700 */
        .accent-text { color: #D97706; }

        /* Seat Styles */
        .seat {
            width: 30px;
            height: 30px;
            margin: 5px;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
        }
        .seat-available {
            background-color: #e5e7eb; /* Light Gray */
            color: #4b5563;
        }
        .seat-occupied {
            background-color: #ef4444; /* Red 500 */
            cursor: not-allowed;
            color: white;
        }
        .seat-selected {
            background-color: #6366F1; /* Indigo 500 */
            color: white;
            box-shadow: 0 0 10px rgba(99, 102, 241, 0.5);
            transform: scale(1.05);
        }
        .seat-premium {
            background-color: #FBBF24; /* Amber 400 */
            color: #854D0E;
        }

        /* Screen Style (Gradient update) */
        .screen {
            height: 50px;
            width: 90%;
            background: linear-gradient(to right, #A78BFA, #6D28D9); /* Purple Gradient */
            border-radius: 5px;
            margin: 20px auto;
            text-align: center;
            line-height: 50px;
            color: white;
            font-weight: 700;
            box-shadow: 0 5px 20px rgba(109, 40, 217, 0.3);
        }

        /* Style for the printable bill */
        @media print {
            body > * { display: none; }
            #app-container {
                display: block !important;
                margin: 0;
                padding: 0;
                width: 100%;
                box-shadow: none;
            }
            .no-print { display: none !important; }
            .bill-container { border: none !important; padding: 0 !important; }
        }
    </style>
</head>
<body class="min-h-screen p-4 md:p-8">
    <div id="app-container" class="max-w-4xl mx-auto bg-white rounded-xl shadow-2xl p-6 md:p-10">
        <header class="mb-8 text-center">
            <h1 class="text-4xl font-extrabold primary-text">Starlight Cinemas</h1>
            <p class="text-gray-600 mt-1">Experience the best of Bollywood and Hollywood.</p>
        </header>

        <main id="main-content">
            <!-- Content will be rendered here by JavaScript -->
        </main>
    </div>

    <!-- Custom Message Box (Replaces alert()) -->
    <div id="messageBox" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white p-6 rounded-lg shadow-2xl max-w-sm w-full text-center">
            <p id="messageBoxContent" class="text-gray-800 mb-4 font-semibold"></p>
            <button onclick="document.getElementById('messageBox').classList.add('hidden')" class="px-4 py-2 primary-bg text-white rounded-lg hover:primary-hover-bg">
                OK
            </button>
        </div>
    </div>

    <script>
        // --- Global Configuration Data ---

        const USD_TO_INR_RATE = 83.00; // Approximate conversion rate for demonstration
        const INR_SYMBOL = '₹';

        function toINR(usd) {
            // Converts USD price to INR and rounds to two decimal places
            return parseFloat((usd * USD_TO_INR_RATE).toFixed(2));
        }

        // --- MOVIES: Adjusted to fit ₹180 - ₹450 ticket range ---
        const MOVIES = [
            // Original USD prices adjusted to new, lower prices to match the required INR range
            { id: 1, title: "Cosmic Drift", genre: "Sci-Fi", plot: "A lone astronaut must pilot a derelict ship across a collapsing wormhole to deliver a life-saving message to Earth before time runs out.", price: toINR(4.50), runtime: "125 min" }, // ~₹373
            { id: 2, title: "The Ancient Key", genre: "Mystery", plot: "An archivist uncovers a 400-year-old cipher hidden in a library book that leads her on a dangerous chase through European capitals.", price: toINR(3.00), runtime: "105 min" }, // ~₹249
            { id: 3, title: "Laugh Riot", genre: "Comedy", plot: "Two rival office workers accidentally swap phones on the busiest day of the year, leading to chaotic mishaps as they try to impersonate each other.", price: toINR(2.50), runtime: "90 min" }, // ~₹207
            { id: 4, title: "Blood Moon", genre: "Horror", plot: "A group of college students vacationing in a remote cabin discover they are victims of an old prophecy tied to the next lunar eclipse.", price: toINR(4.00), runtime: "115 min" }, // ~₹332
            { id: 5, title: "Heart's Echo", genre: "Romance", plot: "A successful baker rediscovers a long-lost love letter, forcing her to confront the decisions that shaped her life 15 years ago.", price: toINR(3.50), runtime: "100 min" }, // ~₹290
            // New Movies
            { id: 6, title: "Apex Protocol", genre: "Action", plot: "A disgraced special forces agent must rescue a captured scientist and defuse a global satellite weapon before a rogue state launches it.", price: toINR(5.00), runtime: "140 min" }, // ~₹415 (Max)
            { id: 7, title: "The Cloud Prince", genre: "Animation", plot: "A curious little cloud learns how to make the perfect thunderstorm while overcoming his fear of heights on the tallest mountain.", price: toINR(2.20), runtime: "85 min" }, // ~₹182 (Min)
            { id: 8, title: "Hidden Worlds", genre: "Documentary", plot: "Exploration of five never-before-seen deep-sea ecosystems and the incredible bioluminescent creatures that inhabit them.", price: toINR(3.20), runtime: "95 min" }, // ~₹265
            { id: 9, title: "The Watcher's Game", genre: "Thriller", plot: "A former hacker realizes the sophisticated smart home system he designed is now watching and controlling him, forcing him to fight his own technology.", price: toINR(4.80), runtime: "110 min" }, // ~₹398
            { id: 10, title: "Aetheria", genre: "Fantasy", plot: "Two siblings discover a portal to a magical, floating kingdom, only to find themselves caught in an ancient war between sky and land.", price: toINR(4.20), runtime: "130 min" } // ~₹348
        ];

        // --- SNACKS: Adjusted to fit ₹100 - ₹300 snack range ---
        const SNACKS = [
            { id: 1, name: "Large Popcorn Combo", price: toINR(3.00) }, // ~₹249
            { id: 2, name: "Soft Drink (Large)", price: toINR(1.50) }, // ~₹124
            { id: 3, name: "Premium Chocolate Bar", price: toINR(1.30) }, // ~₹108 (Min)
            { id: 4, name: "Cheesy Nachos Supreme", price: toINR(3.50) }, // ~₹290 (Max)
            { id: 5, name: "Mineral Water (Bottled)", price: toINR(1.40) }, // ~₹116
            { id: 6, name: "Hot Jumbo Pretzel", price: toINR(2.50) }, // ~₹207
            { id: 7, name: "Artisanal Ice Cream Tub", price: toINR(2.00) }, // ~₹166
            { id: 8, name: "Espresso Coffee (Hot)", price: toINR(1.60) }, // ~₹132
            { id: 9, name: "Veggie Samosa (2 Pcs)", price: toINR(2.80) }, // ~₹232
            { id: 10, name: "Masala Fries", price: toINR(1.80) } // ~₹149
        ];

        const TAX_RATE = 0.08; // Changed from 18% to 8% GST as requested

        // --- Seat Map Configuration ---
        const ROWS = 6;
        const COLS = 10;
        const SEAT_LETTERS = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        // Premium surcharge converted to INR. Adjusted to $1.00 base.
        const PREMIUM_SURCHARGE = toINR(1.00); // ~₹83.00
        const PREMIUM_ROWS = ["E", "F"]; // Rows E and F are premium
        // Occupied seats for demonstration
        const OCCUPIED_SEATS = ["A3", "C8", "D1", "F5", "F6"];

        // Helper to check if a seat is premium
        function isPremiumSeat(seatId) {
            const rowLetter = seatId.charAt(0);
            return PREMIUM_ROWS.includes(rowLetter);
        }

        // --- Application State ---
        let state = {
            currentStep: 1, // 1: Movie, 2: Seats & Snacks, 3: Bill
            selectedGenre: 'All',
            selectedMovie: null, // {id, title, price}
            selectedSeats: [], // [{id: "A1", type: "standard/premium"}]
            selectedSnacks: SNACKS.map(s => ({ ...s, quantity: 0 })), // {id, name, price, quantity}
            bill: null,
            genres: ['All', ...new Set(MOVIES.map(m => m.genre))]
        };

        const $mainContent = document.getElementById('main-content');

        // --- State Manipulation Functions ---

        function changeStep(step) {
            state.currentStep = step;
            renderApp();
            window.scrollTo(0, 0); // Scroll to top on step change
        }

        function selectMovie(movieId) {
            state.selectedMovie = MOVIES.find(m => m.id === movieId);
            state.selectedSeats = []; // Reset seats for new movie
            // Reset snack quantities
            state.selectedSnacks = SNACKS.map(s => ({ ...s, quantity: 0 }));
            changeStep(2);
        }

        function toggleSeat(seatId) {
            if (OCCUPIED_SEATS.includes(seatId)) return;

            const index = state.selectedSeats.findIndex(seat => seat.id === seatId);
            const seatType = isPremiumSeat(seatId) ? 'premium' : 'standard';

            if (index > -1) {
                state.selectedSeats.splice(index, 1); // Deselect
            } else {
                state.selectedSeats.push({ id: seatId, type: seatType }); // Select
            }
            renderSeatSelection(); // Re-render only the seat step
        }

        function updateSnackQuantity(snackId, change) {
            const snack = state.selectedSnacks.find(s => s.id === snackId);
            if (snack) {
                snack.quantity = Math.max(0, snack.quantity + change);
            }
            renderSnackSelection(true); // Re-render only the snack section within the seat step
        }

        function showMessage(message) {
            document.getElementById('messageBoxContent').textContent = message;
            document.getElementById('messageBox').classList.remove('hidden');
        }

        function generateBill() {
            if (!state.selectedMovie || state.selectedSeats.length === 0) {
                showMessage("Please select a movie and at least one seat before proceeding to the bill.");
                return;
            }

            const standardPrice = state.selectedMovie.price;
            const premiumPrice = standardPrice + PREMIUM_SURCHARGE;

            let standardTickets = state.selectedSeats.filter(s => s.type === 'standard');
            let premiumTickets = state.selectedSeats.filter(s => s.type === 'premium');

            const ticketTotal = (standardTickets.length * standardPrice) + (premiumTickets.length * premiumPrice);

            const snackItems = state.selectedSnacks.filter(s => s.quantity > 0);
            const snackTotal = snackItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);

            const subtotal = ticketTotal + snackTotal;
            const taxAmount = subtotal * TAX_RATE;
            const grandTotal = subtotal + taxAmount;

            state.bill = {
                movie: state.selectedMovie.title,
                time: "Today, 7:00 PM",
                tickets: {
                    total: ticketTotal,
                    standard: { count: standardTickets.length, price: standardPrice, seats: standardTickets.map(s => s.id).join(', ') },
                    premium: { count: premiumTickets.length, price: premiumPrice, seats: premiumTickets.map(s => s.id).join(', ') }
                },
                snacks: snackItems.map(s => ({ name: s.name, price: s.price, quantity: s.quantity, total: s.price * s.quantity })),
                summary: { subtotal: subtotal.toFixed(2), taxAmount: taxAmount.toFixed(2), grandTotal: grandTotal.toFixed(2) }
            };

            changeStep(3);
        }

        // --- Rendering Functions ---

        function renderMovieSelection() {
            const filteredMovies = state.selectedGenre === 'All'
                ? MOVIES
                : MOVIES.filter(m => m.genre === state.selectedGenre);

            $mainContent.innerHTML = `
                <h2 class="text-3xl font-semibold text-gray-800 mb-6 border-b pb-2">1. Choose Your Movie</h2>

                <!-- Genre Tabs -->
                <div class="flex flex-wrap gap-2 mb-8 no-print">
                    ${state.genres.map(genre => `
                        <button onclick="state.selectedGenre = '${genre}'; renderMovieSelection();"
                            class="px-4 py-2 rounded-full text-sm font-medium transition duration-150
                            ${state.selectedGenre === genre ? 'primary-bg text-white shadow-md' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}">
                            ${genre}
                        </button>
                    `).join('')}
                </div>

                <!-- Movie List -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    ${filteredMovies.length > 0 ? filteredMovies.map(movie => `
                        <div class="bg-white border border-gray-200 rounded-xl p-5 shadow-lg flex flex-col hover:shadow-xl transition duration-300">
                            <h3 class="text-xl font-bold primary-text mb-2">${movie.title}</h3>
                            <div class="text-sm font-semibold mb-3">
                                <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full">${movie.genre}</span>
                                <span class="text-gray-500 ml-3">${movie.runtime}</span>
                                <span class="accent-text ml-3 font-extrabold">Tickets from ${INR_SYMBOL}${movie.price.toFixed(0)}</span>
                            </div>
                            <p class="text-gray-600 mb-4 flex-grow">${movie.plot}</p>
                            <button onclick="selectMovie(${movie.id})"
                                class="w-full mt-auto py-2.5 accent-bg text-white font-bold rounded-lg hover:accent-hover-bg transition duration-200 shadow-md">
                                Select Movie &rarr;
                            </button>
                        </div>
                    `).join('') : '<p class="text-center col-span-2 text-gray-500">No movies found in this genre.</p>'}
                </div>
            `;
        }

        function renderSeatSelection() {
            if (!state.selectedMovie) {
                changeStep(1);
                return;
            }

            const standardPrice = state.selectedMovie.price;
            const premiumPrice = standardPrice + PREMIUM_SURCHARGE;
            const totalSeatsSelected = state.selectedSeats.length;

            const seatMap = [];

            for (let r = 0; r < ROWS; r++) {
                let row = [];
                for (let c = 1; c <= COLS; c++) {
                    const seatId = SEAT_LETTERS[r] + c;
                    const isOccupied = OCCUPIED_SEATS.includes(seatId);
                    const isSelected = state.selectedSeats.findIndex(seat => seat.id === seatId) > -1;
                    const isPremium = isPremiumSeat(seatId);

                    let seatClass = 'seat';
                    let seatTitle = seatId;
                    const currentPrice = isPremium ? premiumPrice : standardPrice;

                    if (isOccupied) {
                        seatClass += ' seat-occupied';
                        seatTitle += " (Occupied)";
                    } else if (isSelected) {
                        seatClass += ' seat-selected';
                        seatTitle += ` (Selected - ${INR_SYMBOL}${currentPrice.toFixed(0)})`;
                    } else if (isPremium) {
                        seatClass += ' seat-premium hover:bg-amber-500'; // Premium Available Color
                        seatTitle += ` (Premium - ${INR_SYMBOL}${premiumPrice.toFixed(0)})`;
                    } else {
                        seatClass += ' seat-available hover:bg-gray-300'; // Standard Available Color
                        seatTitle += ` (Standard - ${INR_SYMBOL}${standardPrice.toFixed(0)})`;
                    }

                    row.push(`
                        <div class="${seatClass}" onclick="toggleSeat('${seatId}')" title="${seatTitle}">
                            ${c}
                        </div>
                    `);
                }
                seatMap.push(`
                    <div class="flex justify-center items-center mb-1">
                        <div class="w-6 text-right mr-2 text-sm font-bold ${isPremiumSeat(SEAT_LETTERS[r] + '1') ? 'text-amber-700' : 'text-gray-500'}">${SEAT_LETTERS[r]}</div>
                        <div class="flex">${row.join('')}</div>
                    </div>
                `);
            }

            const seatContent = `
                <h2 class="text-3xl font-semibold text-gray-800 mb-6 border-b pb-2">2. Seats & Snacks</h2>
                <button onclick="changeStep(1)" class="no-print mb-4 px-3 py-1 text-sm bg-gray-200 rounded-lg hover:bg-gray-300">
                    &larr; Change Movie
                </button>

                <div class="bg-purple-100 p-4 rounded-xl mb-6 shadow-md">
                    <h3 class="text-xl font-bold primary-text">${state.selectedMovie.title}</h3>
                    <p class="text-gray-600">Standard Ticket: <span class="font-bold text-red-600">${INR_SYMBOL}${standardPrice.toFixed(2)}</span> | Premium Ticket: <span class="font-bold text-red-600">${INR_SYMBOL}${premiumPrice.toFixed(2)}</span></p>
                </div>

                <!-- Seat Selection Area -->
                <div class="mb-8 p-6 bg-gray-100 rounded-xl shadow-inner">
                    <div class="screen">SCREEN - UP FRONT</div>
                    <div class="seat-map flex flex-col items-center pt-4 pb-2">
                        ${seatMap.join('')}
                    </div>
                    <div class="flex flex-wrap justify-center mt-6 text-sm gap-4">
                        <span class="flex items-center"><div class="seat-available seat !w-4 !h-4 !m-1 !rounded-md"></div> Standard Available</span>
                        <span class="flex items-center"><div class="seat-premium seat !w-4 !h-4 !m-1 !rounded-md"></div> Premium Available</span>
                        <span class="flex items-center"><div class="seat-selected seat !w-4 !h-4 !m-1 !rounded-md"></div> Selected (${totalSeatsSelected})</span>
                        <span class="flex items-center"><div class="seat-occupied seat !w-4 !h-4 !m-1 !rounded-md"></div> Occupied</span>
                    </div>
                    <p class="text-center text-lg font-semibold mt-4 text-gray-700">Selected Seats: <span class="primary-text">${state.selectedSeats.map(s => s.id).join(', ') || 'None'}</span></p>
                </div>

                <!-- Snack Selection Area (Integrated into Step 2) -->
                ${renderSnackSelection(true)}

                <div class="flex justify-between items-center pt-4 border-t no-print">
                    <div class="text-lg font-bold text-gray-800">
                        Total Tickets: <span class="text-red-600">${totalSeatsSelected}</span>
                    </div>
                    <button onclick="generateBill()"
                        ${totalSeatsSelected === 0 ? 'disabled' : ''}
                        class="px-8 py-3 accent-bg text-white font-bold rounded-lg hover:accent-hover-bg transition duration-200 shadow-xl disabled:opacity-50 disabled:cursor-not-allowed">
                        Proceed to Billing
                    </button>
                </div>
            `;
            $mainContent.innerHTML = seatContent;
        }

        function renderSnackSelection(isPartial) {
            const snacksHtml = `
                <div id="snack-selection-container" class="${isPartial ? '' : 'p-6 bg-gray-100 rounded-xl shadow-inner mb-8'}">
                    <h3 class="text-2xl font-bold text-gray-800 mb-4 ${isPartial ? 'mt-6 border-b pb-2' : ''}">Snacks & Refreshments</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        ${state.selectedSnacks.map(snack => `
                            <div class="flex items-center justify-between p-3 bg-white rounded-lg border">
                                <div>
                                    <p class="font-semibold text-gray-800">${snack.name}</p>
                                    <p class="text-sm text-gray-500">${INR_SYMBOL}${snack.price.toFixed(2)}</p>
                                </div>
                                <div class="flex items-center no-print">
                                    <button onclick="updateSnackQuantity(${snack.id}, -1)" class="w-8 h-8 bg-red-500 text-white rounded-l-md hover:bg-red-600 transition disabled:opacity-30" ${snack.quantity === 0 ? 'disabled' : ''}>-</button>
                                    <span class="w-10 h-8 flex items-center justify-center border-t border-b font-bold text-lg">${snack.quantity}</span>
                                    <button onclick="updateSnackQuantity(${snack.id}, 1)" class="w-8 h-8 accent-bg text-white rounded-r-md hover:accent-hover-bg transition">+</button>
                                </div>
                                <div class="font-bold text-lg primary-text ml-4 hidden print:block">${INR_SYMBOL}${(snack.price * snack.quantity).toFixed(2)}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            if (isPartial) {
                const container = document.getElementById('snack-selection-container');
                if (container) {
                    container.outerHTML = snacksHtml;
                    return '';
                }
            }
            return snacksHtml;
        }


        function renderBill() {
            if (!state.bill) {
                changeStep(1);
                return;
            }

            const { tickets, snacks, summary, movie, time } = state.bill;
            const totalTickets = tickets.standard.count + tickets.premium.count;

            $mainContent.innerHTML = `
                <h2 class="text-3xl font-semibold text-gray-800 mb-6 border-b pb-2">3. Booking Confirmation & Bill</h2>

                <div class="bill-container max-w-lg mx-auto bg-white border border-gray-300 rounded-xl p-6 shadow-xl print:shadow-none print:border-none">
                    <div class="text-center mb-6">
                        <h3 class="text-2xl font-extrabold primary-text">Starlight Cinemas</h3>
                        <p class="text-sm text-gray-600 mt-1">Receipt Date: ${new Date().toLocaleDateString()}</p>
                    </div>

                    <div class="mb-6 pb-4 border-b">
                        <h4 class="text-xl font-bold text-gray-700">${movie}</h4>
                        <p class="text-gray-500 text-sm">Total Tickets: ${totalTickets}</p>
                        <p class="text-gray-500 text-sm">Show Time: ${time}</p>
                    </div>

                    <!-- Itemized Breakdown -->
                    <h5 class="text-lg font-bold text-gray-700 mb-3">Item Breakdown</h5>

                    <!-- Standard Tickets -->
                    <div class="flex justify-between py-2 border-t border-gray-200">
                        <span class="font-medium text-gray-800">Standard Tickets (${tickets.standard.count} @ ${INR_SYMBOL}${tickets.standard.price.toFixed(2)})</span>
                        <span class="font-medium text-gray-800">${INR_SYMBOL}${(tickets.standard.count * tickets.standard.price).toFixed(2)}</span>
                    </div>
                    ${tickets.standard.seats ? `<p class="text-sm text-gray-500 mb-2 pl-2">Seats: ${tickets.standard.seats}</p>` : ''}

                    <!-- Premium Tickets -->
                    <div class="flex justify-between py-2 border-t border-gray-200">
                        <span class="font-medium text-gray-800">Premium Tickets (${tickets.premium.count} @ ${INR_SYMBOL}${tickets.premium.price.toFixed(2)})</span>
                        <span class="font-medium text-gray-800">${INR_SYMBOL}${(tickets.premium.count * tickets.premium.price).toFixed(2)}</span>
                    </div>
                    ${tickets.premium.seats ? `<p class="text-sm text-gray-500 mb-4 pl-2">Seats: ${tickets.premium.seats}</p>` : ''}


                    <!-- Snacks -->
                    ${snacks.length > 0 ? `
                        <div class="border-t pt-2 mt-2">
                            <h6 class="text-md font-semibold mb-2">Snacks & Refreshments:</h6>
                            ${snacks.map(snack => `
                                <div class="flex justify-between text-sm text-gray-600 mb-1 pl-4">
                                    <span>${snack.name} (x${snack.quantity})</span>
                                    <span>${INR_SYMBOL}${snack.total.toFixed(2)}</span>
                                </div>
                            `).join('')}
                        </div>
                    ` : '<p class="text-sm text-gray-500 mt-2">No snacks ordered.</p>'}


                    <!-- Totals -->
                    <div class="mt-6 pt-4 border-t border-gray-400">
                        <div class="flex justify-between text-base font-medium mb-1">
                            <span>Subtotal:</span>
                            <span>${INR_SYMBOL}${summary.subtotal}</span>
                        </div>
                        <div class="flex justify-between text-base font-medium mb-2">
                            <span>GST (${(TAX_RATE * 100).toFixed(0)}%):</span>
                            <span>${INR_SYMBOL}${summary.taxAmount}</span>
                        </div>
                        <div class="flex justify-between text-2xl font-extrabold accent-text pt-2 border-t-2 border-amber-500">
                            <span>GRAND TOTAL:</span>
                            <span>${INR_SYMBOL}${summary.grandTotal}</span>
                        </div>
                    </div>

                    <p class="text-center text-sm text-gray-400 mt-6">Thank you for choosing Starlight Cinemas! Enjoy the show!</p>
                </div>

                <!-- Actions -->
                <div class="flex justify-center gap-4 mt-8 no-print">
                    <button onclick="window.print()"
                        class="px-6 py-3 primary-bg text-white font-bold rounded-lg hover:primary-hover-bg transition duration-200 shadow-md flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m0 0l4 4m-4-4l-4 4m4-4v-9a2 2 0 012-2h2a2 2 0 012 2v9m-4-4h4"></path></svg>
                        Print Bill
                    </button>
                    <button onclick="state.currentStep = 1; state.selectedMovie = null; state.bill = null; renderApp();"
                        class="px-6 py-3 bg-gray-500 text-white font-bold rounded-lg hover:bg-gray-600 transition duration-200 shadow-md">
                        Start New Booking
                    </button>
                </div>
            `;
        }

        // --- Main Renderer ---

        function renderApp() {
            switch (state.currentStep) {
                case 1:
                    renderMovieSelection();
                    break;
                case 2:
                    renderSeatSelection();
                    break;
                case 3:
                    renderBill();
                    break;
                default:
                    renderMovieSelection();
            }
        }

        // Initial App Load
        document.addEventListener('DOMContentLoaded', renderApp);

    </script>
</body>
</html>

